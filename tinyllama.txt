import streamlit as st
import streamlit.components.v1 as components

# Define a function that will be triggered
def my_function():
    st.write("Button was clicked! Function executed.")

# Initialize a session state variable to track the button click
if 'button_clicked' not in st.session_state:
    st.session_state.button_clicked = False

# Create the HTML button
button_html = """
    <button onclick="trigger_function()">Click Me!</button>
    <script>
        function trigger_function() {
            // Communicate with Streamlit via session state
            var python_code = 'st.session_state.button_clicked = True';
            streamlit_run(python_code);
        }
    </script>
"""

# Render the HTML button in the Streamlit app
components.html(button_html)

# Check if the button was clicked and trigger the Python function
if st.session_state.button_clicked:
    my_function()
    # Reset the session state after the function is triggered
    st.session_state.button_clicked = False
